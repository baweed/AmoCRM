# üöÄ AmoCRM Integration API

RESTful API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å [AmoCRM](https://www.amocrm.com/), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–µ–µ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ CRM-—Å–∏—Å—Ç–µ–º–æ–π.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–¥–µ–ª–æ–∫ —Å AmoCRM –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
- üì© –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤  
- üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ CRM —á–µ—Ä–µ–∑ PATCH-–∑–∞–ø—Ä–æ—Å—ã  
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth 2.0  
- üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ MySQL  
- üê≥ –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker  
- üèó –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MVC  

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                            |
| --------------- | ------------------------------------- |
| Backend         | Node.js, Express.js, TypeScript       |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö     | MySQL 8.0+, Prisma ORM                |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | Docker, Docker Compose                |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  | OAuth 2.0, JWT                        |
| –î–µ–ø–ª–æ–π          | –õ—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥, –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <–≤–∞—à-repo-url>
cd AmoCRM

2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:
DATABASE_URL="mysql://my_user:my_password@localhost:3306/my_database"
MYSQL_ROOT_PASSWORD=mysecretrootpassword
MYSQL_DATABASE=my_database
MYSQL_USER=my_user
MYSQL_PASSWORD=my_password
AMOCRM_CLIENT_ID=–≤–∞—à_client_id
AMOCRM_CLIENT_SECRET=–≤–∞—à_client_secret
AMOCRM_REDIRECT_URI=–≤–∞—à_redirect_uri
AMOCRM_SUBDOMAIN=–≤–∞—à_–ø–æ–¥–¥–æ–º–µ–Ω
PORT=3001

3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

docker-compose up -d


üì° API Endpoints
–í–µ–±—Ö—É–∫–∏

POST /webhook ‚Äî –ø—Ä–∏–µ–º –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç AmoCRM

GET /v4/webhooks ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤

–†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

GET /v4/contacts ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

POST /v4/contacts ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞

PATCH /v4/contacts/:id ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ AmoCRM

–†–∞–±–æ—Ç–∞ —Å–æ —Å–¥–µ–ª–∫–∞–º–∏

GET /v4/leads ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫

POST /v4/leads ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–¥–µ–ª–∫–∏

PATCH /v4/leads/:id ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ –≤ AmoCRM
\
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
```
PATCH /v4/contacts/12345
Content-Type: application/json

{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "first_name": "–ò–≤–∞–Ω",
  "last_name": "–ò–≤–∞–Ω–æ–≤",
  "custom_fields_values": [
    {
      "field_code": "PHONE",
      "values": [{"value": "+79123456789"}]
    }
  ]

}

```

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

```
PATCH /v4/leads/67890
Content-Type: application/json

{
  "name": "–ù–æ–≤–∞—è —Å–¥–µ–ª–∫–∞",
  "price": 100000,
  "status_id": "142"
}
```